(function(a){typeof module==="object"&&module.exports?module.exports=a:a(Highcharts);})(function(J){function D(h,d,m){var l;!d.rgba.length||!h.rgba.length?h=d.input||"none":(h=h.rgba,d=d.rgba,l=d[3]!==1||h[3]!==1,h=(l?"rgba(":"rgb(")+Math.round(d[0]+(h[0]-d[0])*(1-m))+","+Math.round(d[1]+(h[1]-d[1])*(1-m))+","+Math.round(d[2]+(h[2]-d[2])*(1-m))+(l?","+(d[3]+(h[3]-d[3])*(1-m)):"")+")");
return h;}var i=function(){},C=J.getOptions(),I=J.each,H=J.extend,o=J.format,g=J.pick,k=J.wrap,G=J.Chart,E=J.seriesTypes,f=E.pie,F=E.column,e=J.Tick,c=J.fireEvent,b=J.inArray,a=1;
I(["fill","stroke"],function(d){J.Fx.prototype[d+"Setter"]=function(){this.elem.attr(d,D(J.Color(this.start),J.Color(this.end),this.pos));};});H(C.lang,{drillUpText:"\u25c1 Back to {series.name}"});
C.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#0d233a",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#0d233a",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};
J.SVGRenderer.prototype.Element.prototype.fadeIn=function(d){this.attr({opacity:0.1,visibility:"inherit"}).animate({opacity:g(this.newOpacity,1)},d||{duration:250});
};G.prototype.addSeriesAsDrilldown=function(h,d){this.addSingleSeriesAsDrilldown(h,d);this.applyDrilldown();};G.prototype.addSingleSeriesAsDrilldown=function(v,u){var t=v.series,r=t.xAxis,p=t.yAxis,q;
q=v.color||t.color;var n,s=[],m=[],l,h;if(!this.drilldownLevels){this.drilldownLevels=[];}l=t.options._levelNumber||0;(h=this.drilldownLevels[this.drilldownLevels.length-1])&&h.levelNumber!==l&&(h=void 0);
u=H({color:q,_ddSeriesId:a++},u);n=b(v,t.points);I(t.chart.series,function(d){if(d.xAxis===r&&!d.isDrilling){d.options._ddSeriesId=d.options._ddSeriesId||a++,d.options._colorIndex=d.userOptions._colorIndex,d.options._levelNumber=d.options._levelNumber||l,h?(s=h.levelSeries,m=h.levelSeriesOptions):(s.push(d),m.push(d.options));
}});q={levelNumber:l,seriesOptions:t.options,levelSeriesOptions:m,levelSeries:s,shapeArgs:v.shapeArgs,bBox:v.graphic?v.graphic.getBBox():{},color:q,lowerSeriesOptions:u,pointOptions:t.options.data[n],pointIndex:n,oldExtremes:{xMin:r&&r.userMin,xMax:r&&r.userMax,yMin:p&&p.userMin,yMax:p&&p.userMax}};
this.drilldownLevels.push(q);q=q.lowerSeries=this.addSeries(u,!1);q.options._levelNumber=l+1;if(r){r.oldPos=r.pos,r.userMin=r.userMax=null,p.userMin=p.userMax=null;
}if(t.type===q.type){q.animate=q.animateDrilldown||i,q.options.animation=!0;}};G.prototype.applyDrilldown=function(){var h=this.drilldownLevels,d;if(h&&h.length>0){d=h[h.length-1].levelNumber,I(this.drilldownLevels,function(l){l.levelNumber===d&&I(l.levelSeries,function(m){m.options&&m.options._levelNumber===d&&m.remove(!1);
});});}this.redraw();this.showDrillUpButton();};G.prototype.getDrilldownBackText=function(){var d=this.drilldownLevels;if(d&&d.length>0){return d=d[d.length-1],d.series=d.seriesOptions,o(this.options.lang.drillUpText,d);
}};G.prototype.showDrillUpButton=function(){var h=this,d=this.getDrilldownBackText(),n=h.options.drilldown.drillUpButton,m,l;this.drillUpButton?this.drillUpButton.attr({text:d}).align():(l=(m=n.theme)&&m.states,this.drillUpButton=this.renderer.button(d,null,null,function(){h.drillUp();
},m,l&&l.hover,l&&l.select).attr({align:n.position.align,zIndex:9}).add().align(n.position,!1,n.relativeTo||"plotBox"));};G.prototype.drillUp=function(){for(var u=this,t=u.drilldownLevels,s=t[t.length-1].levelNumber,q=t.length,n=u.series,p,m,r,l,h=function(d){var v;
I(n,function(w){w.options._ddSeriesId===d._ddSeriesId&&(v=w);});v=v||u.addSeries(d,!1);if(v.type===r.type&&v.animateDrillupTo){v.animate=v.animateDrillupTo;
}d===m.seriesOptions&&(l=v);};q--;){if(m=t[q],m.levelNumber===s){t.pop();r=m.lowerSeries;if(!r.chart){for(p=n.length;p--;){if(n[p].options.id===m.lowerSeriesOptions.id&&n[p].options._levelNumber===s+1){r=n[p];
break;}}}r.xData=[];I(m.levelSeriesOptions,h);c(u,"drillup",{seriesOptions:m.seriesOptions});if(l.type===r.type){l.drilldownLevel=m,l.options.animation=u.options.drilldown.animation,r.animateDrillupFrom&&r.chart&&r.animateDrillupFrom(m);
}l.options._levelNumber=s;r.remove(!1);if(l.xAxis){p=m.oldExtremes,l.xAxis.setExtremes(p.xMin,p.xMax,!1),l.yAxis.setExtremes(p.yMin,p.yMax,!1);}}}this.redraw();
this.drilldownLevels.length===0?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align();this.ddDupes.length=[];
};F.prototype.supportsDrilldown=!0;F.prototype.animateDrillupTo=function(h){if(!h){var d=this,l=d.drilldownLevel;I(this.points,function(m){m.graphic&&m.graphic.hide();
m.dataLabel&&m.dataLabel.hide();m.connector&&m.connector.hide();});setTimeout(function(){d.points&&I(d.points,function(n,m){var p=m===(l&&l.pointIndex)?"show":"fadeIn",q=p==="show"?!0:void 0;
if(n.graphic){n.graphic[p](q);}if(n.dataLabel){n.dataLabel[p](q);}if(n.connector){n.connector[p](q);}});},Math.max(this.chart.options.drilldown.animation.duration-50,0));
this.animate=i;}};F.prototype.animateDrilldown=function(l){var h=this,q=this.chart.drilldownLevels,n,p=this.chart.options.drilldown.animation,m=this.xAxis;
if(!l){I(q,function(d){if(h.options._ddSeriesId===d.lowerSeriesOptions._ddSeriesId){n=d.shapeArgs,n.fill=d.color;}}),n.x+=g(m.oldPos,m.pos)-m.pos,I(this.points,function(d){d.graphic&&d.graphic.attr(n).animate(H(d.shapeArgs,{fill:d.color}),p);
d.dataLabel&&d.dataLabel.fadeIn(p);}),this.animate=null;}};F.prototype.animateDrillupFrom=function(h){var d=this.chart.options.drilldown.animation,m=this.group,l=this;
I(l.trackerGroups,function(n){if(l[n]){l[n].on("mouseover");}});delete this.group;I(this.points,function(q){var p=q.graphic,n=function(){p.destroy();m&&(m=m.destroy());
};p&&(delete q.graphic,d?p.animate(H(h.shapeArgs,{fill:h.color}),J.merge(d,{complete:n})):(p.attr(h.shapeArgs),n()));});};f&&H(f.prototype,{supportsDrilldown:!0,animateDrillupTo:F.prototype.animateDrillupTo,animateDrillupFrom:F.prototype.animateDrillupFrom,animateDrilldown:function(h){var d=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],p=this.chart.options.drilldown.animation,n=d.shapeArgs,l=n.start,m=(n.end-l)/this.points.length;
if(!h){I(this.points,function(q,r){q.graphic.attr(J.merge(n,{start:l+r*m,end:l+(r+1)*m,fill:d.color}))[p?"animate":"attr"](H(q.shapeArgs,{fill:q.color}),p);
}),this.animate=null;}}});J.Point.prototype.doDrilldown=function(l,h){var q=this.series.chart,n=q.options.drilldown,p=(n.series||[]).length,m;if(!q.ddDupes){q.ddDupes=[];
}for(;p--&&!m;){n.series[p].id===this.drilldown&&b(this.drilldown,q.ddDupes)===-1&&(m=n.series[p],q.ddDupes.push(this.drilldown));}c(q,"drilldown",{point:this,seriesOptions:m,category:h,points:h!==void 0&&this.series.xAxis.ddPoints[h].slice(0)});
m&&(l?q.addSingleSeriesAsDrilldown(this,m):q.addSeriesAsDrilldown(this,m));};J.Axis.prototype.drilldownCategory=function(l){var h,n,m=this.ddPoints[l];
for(h in m){(n=m[h])&&n.series&&n.series.visible&&n.doDrilldown&&n.doDrilldown(!0,l);}this.chart.applyDrilldown();};J.Axis.prototype.getDDPoints=function(h,d){var l=this.ddPoints;
if(!l){this.ddPoints=l={};}l[h]||(l[h]=[]);if(l[h].levelNumber!==d){l[h].length=0;}return l[h];};e.prototype.drillable=function(){var h=this.pos,d=this.label,m=this.axis,l=m.ddPoints&&m.ddPoints[h];
if(d&&l&&l.length){if(!d.basicStyles){d.basicStyles=J.merge(d.styles);}d.addClass("highcharts-drilldown-axis-label").css(m.chart.options.drilldown.activeAxisLabelStyle).on("click",function(){m.drilldownCategory(h);
});}else{if(d&&d.basicStyles){d.styles={},d.css(d.basicStyles),d.on("click",null);}}};k(e.prototype,"addLabel",function(d){d.call(this);this.drillable();
});k(J.Point.prototype,"init",function(h,d,n,m){var l=h.call(this,d,n,m),h=(n=d.xAxis)&&n.ticks[m],n=n&&n.getDDPoints(m,d.options._levelNumber);if(l.drilldown&&(J.addEvent(l,"click",function(){d.xAxis&&d.chart.options.drilldown.allowPointDrilldown===!1?d.xAxis.drilldownCategory(m):l.doDrilldown();
}),n)){n.push(l),n.levelNumber=d.options._levelNumber;}h&&h.drillable();return l;});k(J.Series.prototype,"drawDataLabels",function(h){var d=this.chart.options.drilldown.activeDataLabelStyle;
h.call(this);I(this.points,function(l){l.drilldown&&l.dataLabel&&l.dataLabel.attr({"class":"highcharts-drilldown-data-label"}).css(d);});});var j,C=function(d){d.call(this);
I(this.points,function(h){h.drilldown&&h.graphic&&h.graphic.attr({"class":"highcharts-drilldown-point"}).css({cursor:"pointer"});});};for(j in E){E[j].prototype.supportsDrilldown&&k(E[j].prototype,"drawTracker",C);
}});